<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <div class="container text-white">
        <div class="row justify-content-center">
            <div class="col-md-8 text-center">
                <div id="main">
                    <h2 class="text-white">Johnny Silverhand</h2>
                    <img src="/JohnnyUltimateEdition.png" class="img-fluid" alt="...">
                    <br></br>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe cumque, laborum eveniet voluptatem quos sapiente dignissimos quas quod hic ipsam omnis autem consequuntur laboriosam quis nulla tempore perferendis expedita dolore earum, beatae praesentium. Aspernatur corrupti aperiam minima blanditiis enim. Culpa ut maxime ad temporibus excepturi magni quis quod dolores perferendis.</p>
                    <button id="buy" class="btn btn-info btn-lg">Купить</button>
                    <br></br>
                </div>    
                <form id="form" class="mt-5 pt-5">
                    <div class="mb-3 row">
                        <label for="inputName" class="col-sm-2 col-form-label">Имя</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="name">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Email</label>
                        <div class="col-sm-10">
                        <input type="email" class="form-control-plaintext border border-info" id="email" placeholder="email@example.com">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="inputPhone" class="col-sm-2 col-form-label">Телефон</label>
                        <div class="col-sm-10">
                        <input type="number" class="form-control" id="phone">
                        </div>
                    </div>
                    <button id="order" class="btn btn-info btn-lg">Оформить</button>
                </form>    
            </div>
        </div>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let th = window.Telegram.WebApp;
        let buy = document.getElementById('buy');
        let order = document.getElementById('order');
        tg.expend();

        buy.addEventListener('click', () => {
            document.getElementById('main').style.display = 'none';
            document.getElementById('form').style.display = 'block';
            document.getElementById('form').style.visibility = 'visible';
            document.getElementById('name').value = tg.initDataUnsafe.user.first_name + ' ' + tg.initDataUnsafe.user.last_name
        });

       order.addEventListener('click', () => {
        let name = document.getElementById('name').value;
        let email = document.getElementById('email').value;
        let phone = document.getElementById('phone').value;

        let data = {
            name: name,
            email: email,
            phone: phone
        }
        tg.sendData(JSON.stringify(data));
        tg.close();
        });
    </script>
</body>
</html>
